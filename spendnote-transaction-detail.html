<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SpendNote Dashboard - Manage your cash receipts, transactions, and Cash Boxes in one place.">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" type="image/x-icon" href="favicon.ico">
    <title>Transaction TRX-342 - SpendNote</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/main.css?v=4">
    <link rel="stylesheet" href="assets/css/app-layout.css?v=5">
    <style>
        /* ===== DASHBOARD PAGE SPECIFIC STYLES ===== */
        
        /* TOP NAV */
        .top-nav {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 16px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            box-shadow: 0 2px 16px var(--shadow);
        }

        /* MODERN LOGO */
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 22px;
            font-weight: 900;
            color: var(--text);
            letter-spacing: -0.03em;
        }
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
        }
        .logo-icon::before {
            content: 'S';
            font-size: 22px;
            font-weight: 900;
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .logo-icon::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 2px;
            background: white;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        .logo-text {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 50%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .logo img {
            height: 20px;
            width: auto;
        }

        /* Nav links styles now in app-layout.css */
        
        /* Compact invite banner */
        .invite-banner-compact {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 16px;
            background: rgba(99,102,241,0.06);
            border: 1px solid rgba(99,102,241,0.15);
            border-radius: 10px;
            margin: 0 0 20px 0;
            font-size: 14px;
            color: var(--text);
        }
        .invite-banner-compact > i { color: #6366f1; font-size: 14px; }
        .invite-banner-compact span { flex: 1; }
        .invite-btn-compact {
            padding: 6px 14px;
            background: rgba(99,102,241,0.12);
            border: 1px solid rgba(99,102,241,0.25);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 700;
            color: #4f46e5;
            cursor: pointer;
            transition: all 0.2s;
        }
        .invite-btn-compact:hover { background: rgba(99,102,241,0.2); }
        .dismiss-btn-compact {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 18px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }
        .dismiss-btn-compact:hover { background: rgba(0,0,0,0.05); color: var(--text); }
        
        .nav-link {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-muted);
            border-radius: 12px;
            transition: all 0.2s ease;
            font-size: 14px;
            background: transparent;
            border: none;
        }
        .nav-link:hover { color: var(--text); background: var(--surface-elevated); }
        .nav-link.active { color: white; background: var(--active); }
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: var(--surface-elevated);
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            border: 1px solid var(--border);
        }

        /* Cash Box CARDS */
        /* OLD - not used anymore
        .registers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }
        */
        .register-card {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 20px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        .register-card::before{
            content: none;
        }
        .register-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }
        .register-card.active {
            border: 2px solid var(--card-color, var(--active));
            background: linear-gradient(135deg, #ffffff 0%, rgba(var(--card-rgb, var(--active-rgb)), 0.04) 100%);
            box-shadow: 0 4px 16px rgba(var(--card-rgb, var(--active-rgb)), 0.2);
        }
        .register-card.active:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(var(--card-rgb, var(--active-rgb)), 0.25);
        }
        .register-card.active::before { opacity: 0.06; }

        /* UNIFIED CARD STRUCTURE - SAME AS CASH BOX LIST */
        .register-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .register-header-left {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            flex: 1;
            min-width: 0;
        }

        .register-actions {
            display: flex;
            gap: 8px;
        }

        .register-kebab {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            transition: all 0.2s ease;
            cursor: pointer;
            text-decoration: none;
        }

        .register-kebab:hover {
            background: var(--surface-elevated);
            color: var(--text);
        }

        .register-name {
            font-size: 16px;
            font-weight: 800;
            letter-spacing: -0.01em;
            margin-bottom: 4px;
            position: relative;
            padding-left: 16px;
            color: var(--text);
        }

        .register-name::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            background: var(--card-color, var(--active));
            box-shadow: 0 0 0 2px rgba(var(--card-rgb, var(--active-rgb)), 0.14);
        }

        /* Support for icon color classes */
        .register-card .register-name::before {
            background: var(--card-color, var(--active));
        }
        .register-card .register-icon.green { color: #059669; }
        .register-card .register-icon.orange { color: #f59e0b; }
        .register-card .register-icon.blue { color: #3b82f6; }
        .register-card .register-icon.purple { color: #8b5cf6; }
        .register-card .register-icon.red { color: #ef4444; }

        /* OLD STRUCTURE SUPPORT (deprecated) */
        .register-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        .register-info {
            flex: 1;
            min-width: 0;
        }
        .register-info h3 {
            font-size: 16px;
            font-weight: 800;
            margin-bottom: 4px;
            color: var(--text);
            position: relative;
            padding-left: 16px;
        }
        .register-info h3::before{
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: var(--card-color, var(--active));
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            box-shadow: 0 0 0 2px rgba(var(--card-rgb, var(--active-rgb)), 0.14);
        }
        .register-id {
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 600;
            font-family: monospace;
            background: var(--surface-elevated);
            padding: 3px 6px;
            border-radius: 5px;
            display: inline-block;
        }
        .register-icon {
            width: 72px !important;
            height: 72px !important;
            border-radius: 18px !important;
            background: linear-gradient(135deg, rgba(var(--card-rgb, var(--active-rgb)), 0.1), rgba(var(--card-rgb, var(--active-rgb)), 0.05));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--card-color, var(--active));
            font-size: 32px !important;
            border: 2px solid rgba(var(--card-rgb, var(--active-rgb)), 0.2);
        }
        .register-balance {
            font-size: 32px;
            font-weight: 900;
            color: var(--text);
            margin-bottom: 16px;
            letter-spacing: -0.04em;
            text-align: right;
        }

        .trend-indicator {
            font-size: 14px;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        .trend-indicator.up { background: rgba(16,185,129,0.12); color: #059669; }
        .trend-indicator.down { background: rgba(239,68,68,0.12); color: #dc2626; }
        .trend-indicator i { font-size: 12px; }

        .register-stats {
            display: none; /* Hidden - only balance shown */
        }
        .stat-item {
            background: var(--surface-elevated);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 12px 14px;
            position: relative;
        }

        .tooltip {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 100;
        }
        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: rgba(0,0,0,0.9);
        }
        .stat-item:hover .tooltip { opacity: 1; }

        .stat-label {
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 6px;
            letter-spacing: 0.05em;
        }
        .stat-value {
            font-size: 18px;
            font-weight: 800;
        }
        .stat-value.in { color: #10b981; }
        .stat-value.out { color: #f59e0b; }

        /* CONTEXT ROW */
        .context-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }

        .add-transaction-btn {
            background-color: var(--active);
            background-image: none;
            border: none;
            border-radius: 20px;
            padding: 24px 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
            box-shadow: 0 8px 24px rgba(var(--active-rgb), 0.28);
            position: relative;
        }
        .add-transaction-btn::before { display: none; }
        .add-transaction-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 14px 34px rgba(var(--active-rgb), 0.38);
            filter: brightness(0.96);
        }
        .add-transaction-btn:hover::before { display: none; }
        
        .add-transaction-btn:active {
            transform: translateY(-2px);
            filter: brightness(0.94);
        }
        .add-btn-icon {
            width: 56px;
            height: 56px;
            background: rgba(255,255,255,0.25);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            font-weight: 900;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .add-btn-text {
            font-size: 20px;
            font-weight: 900;
            color: white;
            line-height: 1.3;
            letter-spacing: -0.02em;
        }

        .context-pill {
            background: linear-gradient(135deg, var(--surface) 0%, rgba(var(--active-rgb), 0.08) 100%);
            border: 2px solid var(--active);
            border-radius: 18px;
            padding: 20px 24px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 6px 28px rgba(var(--active-rgb), 0.2);
        }
        .context-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-right: 20px;
            border-right: 2px solid var(--border);
            flex-shrink: 0;
        }
        .context-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--active);
            box-shadow: 0 0 20px rgba(var(--active-rgb), 0.6);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }
        .context-text {
            font-size: 15px;
            font-weight: 800;
            color: var(--active);
            white-space: nowrap;
        }
        .context-stats {
            display: flex;
            gap: 20px;
            flex: 1;
            justify-content: space-around;
        }
        .context-stat {
            text-align: center;
            position: relative;
        }
        .context-stat-value {
            font-size: 20px;
            font-weight: 900;
            color: var(--text);
            margin-bottom: 2px;
            letter-spacing: -0.02em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .context-stat-trend {
            font-size: 12px;
            font-weight: 700;
        }
        .context-stat-trend.up { color: #059669; }
        .context-stat-trend.down { color: #dc2626; }
        .context-stat-label {
            font-size: 10px;
            color: var(--text-muted);
            font-weight: 700;
            text-transform: uppercase;
        }

        /* TRANSACTIONS */
        .transactions-card {
            background: var(--surface);
            border: 2px solid rgba(var(--active-rgb), 0.2);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 6px 28px rgba(var(--active-rgb), 0.12);
            width: 100%;
        }
        .transactions-header {
            padding: 16px 32px;
            border-bottom: 2px solid rgba(var(--cashbox-rgb, var(--active-rgb)), 0.25);
            background: transparent;
        }
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .transactions-title {
            font-size: 18px;
            font-weight: 800;
            color: var(--text);
        }
        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .view-all-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 15px;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(5, 150, 105, 0.2);
        }
        .view-all-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(5, 150, 105, 0.3);
        }
        .view-all-btn i {
            font-size: 13px;
        }

        .filter-toggle-btn {
            padding: 10px 20px;
            background: white;
            color: var(--text);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .filter-toggle-btn:hover {
            background: var(--surface-elevated);
            border-color: var(--active);
        }
        .filter-toggle-btn.active {
            background: rgba(var(--active-rgb), 0.1);
            color: var(--active);
            border-color: var(--active);
        }
        .filter-toggle-btn i {
            transition: transform 0.3s;
        }
        .filter-toggle-btn.active i {
            transform: rotate(180deg);
        }

        .export-btn {
            padding: 10px 20px;
            background: var(--active);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .export-btn:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .filter-panel-wrapper {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .filter-panel-wrapper.expanded {
            max-height: 400px;
        }

        .filter-panel {
            padding: 20px 32px;
            background: linear-gradient(135deg, rgba(var(--active-rgb), 0.02), transparent);
            border-bottom: 2px solid var(--border);
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .filter-label {
            font-size: 11px;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .filter-label i {
            font-size: 10px;
            color: var(--active);
        }
        .filter-input {
            padding: 10px 14px;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            background: white;
            transition: all 0.2s;
        }
        .filter-input:focus {
            border-color: var(--active);
            box-shadow: 0 0 0 3px rgba(var(--active-rgb), 0.1);
        }
        .filter-input::placeholder {
            color: var(--text-muted);
            font-weight: 500;
        }

        .amount-range {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .amount-range input {
            flex: 1;
        }
        .amount-range span {
            color: var(--text-muted);
            font-weight: 700;
        }

        .filter-actions {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }
        .filter-btn {
            padding: 10px 20px;
            border: 1px solid var(--border);
            background: white;
            color: var(--text);
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .filter-btn:hover {
            background: var(--surface-elevated);
        }
        .filter-btn.primary {
            background: var(--active);
            color: white;
            border-color: var(--active);
        }
        .filter-btn.primary:hover {
            background: var(--primary-light);
        }
        .filter-btn.clear {
            color: #ef4444;
            border-color: rgba(239,68,68,0.3);
        }
        .filter-btn.clear:hover {
            background: rgba(239,68,68,0.1);
            border-color: #ef4444;
        }

        .filter-tabs {
            display: flex;
            gap: 6px;
            background: white;
            padding: 4px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        .filter-tab {
            padding: 8px 18px;
            border: none;
            background: transparent;
            color: var(--text-muted);
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.2s;
        }
        .filter-tab:hover { 
            color: var(--text);
            background: var(--surface-elevated);
        }
        .filter-tab.active {
            background: var(--active);
            color: white;
        }

        .table-wrapper {
            max-height: 600px;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
            width: 100%;
        }

        .table-grid {
            display: grid;
            grid-template-columns: 70px 130px 140px 160px 1fr 110px 130px 80px;
            gap: 16px;
            padding: 12px 16px; /* ✅ Alacsonyabb (volt: 14px 20px) */
            align-items: center;
            border-bottom: 1px solid var(--border);
            transition: all 0.2s;
            position: relative;
            width: 100%;
            box-sizing: border-box;
        }
        /* Row hover/focus uses cashbox color */
        .table-grid:not(.table-header):hover {
            background: rgba(var(--cashbox-rgb, 5, 150, 105), 0.06);
        }
        .table-grid:not(.table-header):focus {
            background: rgba(var(--cashbox-rgb, 5, 150, 105), 0.1);
            outline: 2px solid var(--cashbox-color, #059669);
            outline-offset: -2px;
            border-radius: 8px;
        }
        .table-grid:hover .row-tooltip { opacity: 1; }
        .table-header {
            font-size: 11px !important;
            color: var(--text-muted) !important;
            font-weight: 700 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.06em !important;
            background: transparent !important;
            border-bottom: 1px solid rgba(var(--cashbox-rgb, var(--active-rgb)), 0.15) !important;
            position: sticky;
            top: 0;
            z-index: 10;
            padding: 12px 16px !important;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        .table-header:hover { 
            background: rgba(var(--cashbox-rgb, var(--active-rgb)), 0.03) !important;
        }

        .row-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--active);
        }

        .row-tooltip {
            position: absolute;
            right: 100px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 10px 14px;
            border-radius: 10px;
            font-size: 12px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            white-space: nowrap;
            z-index: 50;
        }
        .row-tooltip strong { color: #10b981; }

        /* Type badge - IN/OUT */
        .tx-type {
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 800;
            text-align: center;
        }
        .tx-type.in {
            background: rgba(16,185,129,0.15);
            color: #059669;
        }
        .tx-type.out {
            background: rgba(245,158,11,0.15);
            color: #d97706;
        }
        
        /* Cash Box badge */
        .tx-cashbox {
            font-size: 13px;
        }
        .cashbox-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 13px;
            color: var(--text);
        }
        .cashbox-badge::before {
            content: '';
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--cb-color, var(--text-muted));
            flex-shrink: 0;
        }

        .tx-icon {
            width: 38px;
            height: 38px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            font-weight: 800;
        }
        .tx-icon.in {
            background: linear-gradient(135deg, rgba(16,185,129,0.15), rgba(16,185,129,0.08));
            color: #059669;
            border: 1px solid rgba(16,185,129,0.2);
        }
        .tx-icon.out {
            background: linear-gradient(135deg, rgba(245,158,11,0.15), rgba(245,158,11,0.08));
            color: #f59e0b;
            border: 1px solid rgba(245,158,11,0.2);
        }
        .tx-receipt {
            font-size: 15px;
            font-weight: 800;
            color: var(--active);
            font-family: monospace;
        }
        .tx-desc {
            font-size: 13px; /* ⬇️ Kisebb (volt: 15px) */
            font-weight: 500; /* ⬇️ Vékonyabb (volt: 700) */
            color: var(--text-muted); /* ⬇️ Halvány (volt: text) */
        }
        .tx-person {
            font-size: 14px; /* ⬆️ Nagyobb (volt: 13px) */
            color: var(--text); /* ⬆️ Sötétebb (volt: text-muted) */
            font-weight: 600;
        }
        .tx-amount {
            font-size: 17px;
            font-weight: 900;
            text-align: right;
        }
        .tx-amount.in { color: #10b981; }
        .tx-amount.out { color: #f59e0b; }
        .tx-datetime {
            font-size: 12px;
            color: var(--text);
            font-weight: 600;
            text-align: left;
            padding-left: 20px;
        }
        .tx-datetime .date {
            display: block;
            font-weight: 700;
        }
        .tx-datetime .time {
            display: block;
            color: var(--text-muted);
            font-size: 11px;
            font-weight: 600;
        }
        .tx-action {
            padding: 8px 16px;
            background: rgba(var(--row-rgb, var(--active-rgb)), 0.1);
            color: var(--row-color, var(--active));
            border: 1px solid rgba(var(--row-rgb, var(--active-rgb)), 0.2);
            border-radius: 10px;
            font-weight: 800;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tx-action:hover {
            background: var(--row-color, var(--active));
            color: white;
            transform: translateY(-1px);
        }

        .bulk-actions {
            padding: 12px 32px;
            background: rgba(var(--active-rgb), 0.05);
            border-bottom: 2px solid var(--border);
            display: none;
            align-items: center;
            gap: 16px;
        }
        .bulk-actions.active { display: flex; }
        .bulk-actions-text {
            font-size: 14px;
            font-weight: 700;
            color: var(--text);
        }
        .bulk-action-btn {
            padding: 8px 16px;
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .bulk-action-btn:hover {
            background: var(--active);
            color: white;
            border-color: var(--active);
        }
        .bulk-action-btn.delete {
            color: #ef4444;
            border-color: #ef4444;
        }
        .bulk-action-btn.delete:hover {
            background: #ef4444;
            color: white;
        }

        .table-wrapper::-webkit-scrollbar { width: 10px; }
        .table-wrapper::-webkit-scrollbar-track { background: var(--surface-elevated); }
        .table-wrapper::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 5px;
        }
        .table-wrapper::-webkit-scrollbar-thumb:hover { background: var(--active); }

        @media (max-width: 1024px) {
            .context-row { grid-template-columns: 1fr; }
            .context-pill { flex-direction: column; gap: 16px; }
            .context-badge { border: none; padding: 0; }
            .filter-grid { grid-template-columns: 1fr; }
        }
    
        /* ===== CAROUSEL STYLES ===== */
        .registers-carousel-section {
            margin-bottom: 30px;
            width: 100%;
            max-width: 100%;
            overflow: visible;
            position: relative;
            padding-top: 8px;
        }

        .carousel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .carousel-title {
            font-size: 18px; /* Section subtitle size */
            font-weight: 700;
            color: var(--text);
            margin: 0;
            letter-spacing: -0.01em;
        }

        .carousel-nav {
            position: absolute;
            top: -50px;
            right: 0;
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .carousel-arrow {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 2px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carousel-arrow:hover:not(.swiper-button-disabled) {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .carousel-arrow.swiper-button-disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .carousel-arrow i {
            color: #6b7280;
            font-size: 16px;
        }

        /* Swiper overrides */
        .registers-swiper {
            padding: 8px 0 50px 0;
            overflow: visible !important;
            width: 100%;
        }
        
        .swiper-wrapper {
            display: flex;
            overflow: visible !important;
        }

        .swiper-slide {
            height: auto;
        }

        .registers-swiper .register-card {
            margin: 0;
            height: 100%;
            max-width: 100%;
            width: 100%;
        }

        /* Pagination */
        .swiper-pagination {
            bottom: 10px !important;
        }

        .swiper-pagination-bullet {
            width: 8px;
            height: 8px;
            background: #d1d5db;
            opacity: 1;
            transition: all 0.3s ease;
        }

        .swiper-pagination-bullet-active {
            background: #10b981;
            width: 24px;
            border-radius: 4px;
        }

        /* Add Cash Box Button */
        .add-register-container {
            text-align: center;
            margin-top: 20px;
        }

        .add-register-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 28px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(16, 185, 129, 0.2);
        }

        .add-register-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(16, 185, 129, 0.3);
        }

        .add-register-btn i {
            font-size: 18px;
        }


        /* Fix pagination overlap */
        .swiper-pagination {
            bottom: 20px !important;
            position: relative !important;
            margin-top: 20px;
        }

        /* Prevent icon color change on hover */
        .register-card:hover .register-icon i,
        .register-card.active .register-icon i {
            color: inherit;
        }

        
        /* ADD CASH BOX CARD - UNIFIED DESIGN */
        .add-cash-box-card {
            background: var(--surface);
            border: 2px dashed var(--border);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            min-height: 180px;
            height: 100%;
        }

        .add-cash-box-card:hover {
            border-color: var(--primary);
            background: rgba(5, 150, 105, 0.02);
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(5, 150, 105, 0.12);
        }

        .add-cash-box-card.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .add-cash-box-card.disabled:hover {
            border-color: var(--border);
            background: var(--surface);
            transform: none;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .add-cash-box-icon {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: rgba(5, 150, 105, 0.1);
            border: 2px solid rgba(5, 150, 105, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .add-cash-box-title {
            font-size: 16px;
            font-weight: 800;
            color: var(--text);
            margin-bottom: 6px;
        }

        .add-cash-box-subtitle {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-muted);
            margin-bottom: 0;
        }

        .add-cash-box-upgrade {
            margin-top: 12px;
            padding: 10px 18px;
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 10px;
            color: #f59e0b;
            font-size: 13px;
            font-weight: 700;
            display: none;
        }

        .add-cash-box-card.disabled .add-cash-box-upgrade {
            display: block;
        }

        .add-cash-box-card.disabled .add-cash-box-subtitle {
            display: none;
        }

        .add-register-message {
            margin-top: 16px;
            text-align: center;
        }

        .add-register-message p {
            color: #6b7280;
            font-size: 14px;
            line-height: 1.5;
            margin: 0;
        }

        
                /* Responsive */
        @media (max-width: 768px) {
            .logo img {
                height: 18px;
            }
            
            .carousel-title {
                font-size: 22px; /* Slightly smaller on mobile */
            }
            
            .carousel-nav {
                display: none;
            }
        }

        /* Site-nav styles now in app-layout.css */
        
/* FOOTER (dashboard specific if needed) */
        footer {
            background: var(--surface);
            padding: 3rem 2rem 2rem;
            border-top: 1px solid var(--border);
        }

        .footer-brand p {
            color: #000000;
            line-height: 1.6;
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
        }

        .newsletter-form {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .newsletter-form input {
            flex: 1;
            padding: 0.65rem 1rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: inherit;
        }

        .newsletter-form button {
            padding: 0.65rem 1.25rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .newsletter-form button:hover {
            transform: translateY(-2px);
        }

        .footer-links h4 {
            margin-bottom: 1rem;
            font-weight: 800;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links a {
            color: #000000;
            text-decoration: none;
            display: block;
            padding: 0.4rem 0;
            transition: color 0.2s;
            font-size: 0.9rem;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
            color: #000000;
            font-size: 0.85rem;
        }

        .footer-social {
            display: flex;
            gap: 0.75rem;
        }

        .footer-social a {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(5, 150, 105, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            transition: all 0.2s;
        }

        .footer-social a:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        

        .site-nav .nav-links a.active {
            color: var(--active);
        }

        .site-nav .nav-links a{
            position: relative;
        }
        .site-nav .nav-links a.active::after{
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: -10px;
            height: 3px;
            border-radius: 999px;
            background: var(--active);
            opacity: 0.9;
        }

/* ===== End imported ===== */

        /* ===== App topbar enhancements ===== */
        .app-topbar{
            margin: 0 auto;
            max-width: 1400px;
            padding: 18px 20px;
            border: 1px solid var(--border);
            border-radius: 16px;
            background: linear-gradient(180deg, rgba(5, 150, 105, 0.06), rgba(255,255,255,0.9));
            box-shadow: 0 8px 24px rgba(15, 23, 42, 0.06);
        }
        .app-topbar .context-row{
            margin: 0;
        }
        .app-topbar .add-transaction-btn{
            border-radius: 14px;
        }
        .app-topbar .context-pill{
            border-radius: 16px;
            background: rgba(255,255,255,0.85);
        }
        .app-topbar .context-stat-balance .context-stat-value{
            font-size: 1.35rem;
            font-weight: 900;
            letter-spacing: -0.02em;
        }
        .registers-carousel-section {
            margin-top: 0; /* No extra margin, page-header handles spacing */
        }
        /* Carousel navigation moved to top-right of carousel section */


        /* ===== Cash Box card kebab menu (settings/delete) ===== */
.register-top{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:14px;
}

.register-header-left{
  display:flex;
  align-items:flex-start;
  gap:12px;
  min-width:0;
}

.register-icon.small{
  width:34px;
  height:34px;
  border-radius:10px;
  flex:0 0 auto;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
}

.register-info{
  min-width:0;
}

.register-actions{
  position:relative;
  flex:0 0 auto;
}

.register-kebab{
  width:32px;
  height:32px;
  border-radius:10px;
  border:1px solid var(--border);
  background: rgba(148, 163, 184, 0.10);
  color: var(--text-secondary);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition: all .15s ease;
}

.register-kebab:hover{
  background: rgba(148, 163, 184, 0.16);
  color: var(--text);
}

.register-menu{
  position:absolute;
  top: calc(100% + 8px);
  right: 0;
  width: 220px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--shadow);
  padding: 8px;
  display:none;
  z-index: 50;
}

.register-menu.open{ display:block; }

.register-menu button{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border-radius:10px;
  background:transparent;
  border:0;
  color: var(--text);
  cursor:pointer;
  font-weight:600;
  font-size:14px;
}

.register-menu button:hover{
  background: rgba(148, 163, 184, 0.10);
}

.register-menu .divider{
  height:1px;
  background: var(--border);
  margin: 6px 4px;
}

.register-menu .danger{
  color: var(--danger);
}
.register-menu.open{ display: block; }
        .register-menu button{
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 12px 14px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-weight: 700;
            font-size: 13px;
            color: var(--text);
        }
        .register-menu button:hover{ background: rgba(var(--active-rgb), 0.06); }
        .register-menu .danger{
            color: #dc2626;
        }
        .register-menu .danger:hover{
            background: rgba(239, 68, 68, 0.08);
        }
        .register-menu .divider{
            height: 1px;
            background: var(--border);
        }

        .tx-desc, .tx-person, .tx-receipt{
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .tx-receipt{ text-align: left; }
        /* Add breathing room between Amount and Date columns */
        .tx-amount{ padding-right: 10px; }
        .tx-datetime{ padding-left: 16px; }
        .tx-action{ width: 100%; text-align: center; }
        .table-header > div{
            white-space: nowrap;
        }
        .table-header > div:nth-child(9){ padding-left: 16px; }


.tx-by{font-size:11px;color:#6b7280;margin-top:2px;}

        /* ===== Invite banner (team tip) ===== */
        .invite-banner{
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap:16px;
            padding:16px 18px;
            border:2px dashed rgba(99,102,241,0.25);
            background: rgba(99,102,241,0.06);
            border-radius: 16px;
            margin: 14px 0 18px 0;
        }
        .invite-banner-left{
            display:flex;
            align-items:flex-start;
            gap:12px;
            min-width: 0;
        }
        .invite-banner-icon{
            width:28px;
            height:28px;
            display:flex;
            align-items:center;
            justify-content:center;
            color: rgba(5,150,105,0.95);
            flex: 0 0 auto;
            margin-top:2px;
        }
        .invite-banner-title{
            font-weight: 800;
            font-size: 16px;
            color: var(--text);
            margin: 0;
            line-height: 1.2;
        }
        .invite-banner-text{
            margin: 2px 0 0 0;
            color: rgba(15,23,42,0.75);
            font-size: 14px;
            line-height: 1.35;
        }
        .invite-banner-actions{
            display:flex;
            align-items:center;
            gap:10px;
            flex: 0 0 auto;
        }
        .invite-btn{
            border: 1px solid rgba(99,102,241,0.25);
            background: rgba(99,102,241,0.12);
            color: var(--text);
            padding: 10px 14px;
            border-radius: 14px;
            font-weight: 700;
            cursor: pointer;
            white-space: nowrap;
        }
        .dismiss-btn{
            border: 1px solid rgba(15,23,42,0.12);
            background: rgba(255,255,255,0.9);
            color: var(--text);
            padding: 10px 14px;
            border-radius: 14px;
            font-weight: 700;
            cursor: pointer;
            white-space: nowrap;
        }
        .invite-btn:hover{ filter: brightness(0.98); }
        .dismiss-btn:hover{ filter: brightness(0.98); }

        .tx-createdby{ font-weight:700; color: rgba(15,23,42,0.75); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* --- FIX: Filters wrap into two rows (no overflow) --- */
.filters-row, .filters-grid, .filters-container {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 10px !important;
}
.filters-row > *, .filters-grid > *, .filters-container > * {
  flex: 1 1 220px !important;
  min-width: 220px !important;
}
@media (min-width: 1100px) {
  .filters-row > *, .filters-grid > *, .filters-container > * {
    flex: 1 1 calc(50% - 10px) !important;
    min-width: 260px !important;
  }
}
/* Ensure filter dropdown panel fits viewport */
.filters-dropdown, .filters-menu, .filter-dropdown-panel {
  max-width: min(920px, 95vw) !important;
  width: auto !important;
}


/* --- FIX: Transactions table fits screen (no horizontal scroll) --- */
.transactions-table, table.transactions-table, .table-transactions {
  width: 100% !important;
  table-layout: fixed !important;
}
.transactions-table th, .transactions-table td,
table.transactions-table th, table.transactions-table td,
.table-transactions th, .table-transactions td {
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}
/* Narrower "Name/Description" style columns */
.transactions-table .col-name, .transactions-table .col-vendor, .transactions-table .col-desc,
.table-transactions .col-name, .table-transactions .col-vendor, .table-transactions .col-desc {
  width: 22% !important;
}
/* Standard widths for other columns */
.transactions-table .col-date, .table-transactions .col-date { width: 12% !important; }
.transactions-table .col-amount, .table-transactions .col-amount { width: 12% !important; text-align: right !important; }
.transactions-table .col-category, .table-transactions .col-category { width: 14% !important; }
.transactions-table .col-cashbox, .table-transactions .col-cashbox { width: 16% !important; }
.transactions-table .col-createdby, .table-transactions .col-createdby { width: 14% !important; }


/* Remove forced horizontal scroll on table wrappers */
.table-responsive, .transactions-table-wrap, .table-wrap {
  overflow-x: visible !important;
}


/* === v23 FIXES === */

/* 1) Kill horizontal scrolling for the transactions table area */
.table-responsive,
.transactions-table-wrap,
.table-wrap,
.table-container,
.recent-transactions .table-responsive,
.recent-transactions .transactions-table-wrap,
.recent-transactions .table-wrap {
  overflow-x: hidden !important;
}

/* Make sure the table can actually fit */
.transactions-table,
table.transactions-table,
.table-transactions,
.recent-transactions table {
  width: 100% !important;
  table-layout: fixed !important;
}

/* Tighter table density */
.transactions-table th,
.transactions-table td,
table.transactions-table th,
table.transactions-table td,
.table-transactions th,
.table-transactions td,
.recent-transactions table th,
.recent-transactions table td {
  padding: 8px 6px !important;
  font-size: 12px !important;
}

/* Default: no-nowrap only where needed; allow wrap on text-heavy columns */
.transactions-table th,
.transactions-table td,
table.transactions-table th,
table.transactions-table td,
.table-transactions th,
.table-transactions td,
.recent-transactions table th,
.recent-transactions table td {
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

/* Allow wrapping on description + date/time so we don't force width */
.transactions-table .col-desc,
.table-transactions .col-desc,
.recent-transactions .col-desc,
.transactions-table .col-date,
.table-transactions .col-date,
.recent-transactions .col-date {
  white-space: normal !important;
  line-height: 1.2 !important;
}

/* Column width map (tuned to avoid horizontal scroll) */
.transactions-table .col-check,
.table-transactions .col-check,
.recent-transactions .col-check { width: 4% !important; }

.transactions-table .col-idx,
.table-transactions .col-idx,
.recent-transactions .col-idx { width: 4% !important; }

.transactions-table .col-type,
.table-transactions .col-type,
.recent-transactions .col-type { width: 6% !important; }

.transactions-table .col-receipt,
.table-transactions .col-receipt,
.recent-transactions .col-receipt { width: 8% !important; }

.transactions-table .col-desc,
.table-transactions .col-desc,
.recent-transactions .col-desc { width: 22% !important; }

.transactions-table .col-from,
.table-transactions .col-from,
.recent-transactions .col-from { width: 12% !important; }

.transactions-table .col-to,
.table-transactions .col-to,
.recent-transactions .col-to { width: 12% !important; }

.transactions-table .col-amount,
.table-transactions .col-amount,
.recent-transactions .col-amount { width: 10% !important; text-align: right !important; }

.transactions-table .col-date,
.table-transactions .col-date,
.recent-transactions .col-date { width: 14% !important; }

.transactions-table .col-createdby,
.table-transactions .col-createdby,
.recent-transactions .col-createdby { width: 10% !important; }

.transactions-table .col-action,
.table-transactions .col-action,
.recent-transactions .col-action { width: 8% !important; }

/* If there is any leftover forced scrollbar, hide it (last resort) */
.recent-transactions,
.recent-transactions .card,
.recent-transactions .card-body {
  overflow-x: hidden !important;
}

/* 2) Remove hover-only "category" labels/tags/badges on rows (not used in Spendnote) */
.category,
.category-tag,
.category-badge,
.row-category,
.badge-category,
.tag-category,
.hover-category,
[class*="categoryTag"],
[class*="category-tag"],
[class*="category_badge"],
[data-category],
[data-category-tag] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* If they are shown only on hover, ensure hover doesn't reveal anything */
tr:hover .category,
tr:hover .category-tag,
tr:hover .category-badge,
tr:hover .row-category,
tr:hover [data-category],
tr:hover [data-category-tag] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}


/* === v24 FIXES: no horizontal scroll + proper row selection === */

/* Hide any remaining tooltip UI */
.row-tooltip { display: none !important; }

/* Ensure the container never shows a horizontal scrollbar */
.recent-transactions,
.table-container,
.table-wrap,
.transactions-table-wrap {
  overflow-x: hidden !important;
}

/* Proper selected-row styling that spans full width */
.table-grid.is-selected {
  background: rgba(var(--active-rgb), 0.06) !important;
  box-shadow: inset 0 0 0 2px rgba(var(--active-rgb), 0.55) !important;
  border-radius: 12px;
}

/* Hook selection via focus too (keyboard) */
.table-grid:focus-within {
  outline: none;
  box-shadow: inset 0 0 0 2px rgba(var(--active-rgb), 0.35);
}

/* Created by typography: same visual weight as From/To, and short username */
.tx-createdby{
  font-size: 13px !important;
  font-weight: 600 !important;
  color: var(--text-muted) !important;
  text-transform: none !important;
}

/* Keep date/time readable but compact */
.tx-datetime .date { font-size: 13px !important; }
.tx-datetime .time { font-size: 12px !important; }

/* Action button must not overflow */
.tx-action{
  width: 100% !important;
  min-width: 0 !important;
  padding: 10px 12px !important;
  font-size: 13px !important;
  white-space: nowrap !important;
}


/* === v25 FIX: Filters panel layout (2-column grid, no overflow) === */
.filter-panel-wrapper { 
  max-width: min(960px, 95vw) !important;
  width: auto !important;
}
.filter-panel {
  max-width: min(960px, 95vw) !important;
  width: auto !important;
  overflow-x: hidden !important;
}
/* Force filters into two columns on desktop, one on mobile */
.filter-grid {
  display: grid !important;
  grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  gap: 14px !important;
  align-items: start !important;
}
@media (max-width: 820px) {
  .filter-grid { grid-template-columns: 1fr !important; }
}
/* Amount range: keep inputs inside the card, allow shrink */
.amount-range {
  display: grid !important;
  grid-template-columns: 1fr auto 1fr !important;
  gap: 8px !important;
  align-items: center !important;
}
.amount-range .filter-input { min-width: 0 !important; width: 100% !important; }
/* Ensure filter groups don't force min widths */
.filter-group { min-width: 0 !important; }
.filter-input { min-width: 0 !important; }


/* === v26 TWEAK: Filters in TWO ROWS (3 columns) === */
.filter-grid{
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
}
@media (max-width: 1100px){
  .filter-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
}
@media (max-width: 820px){
  .filter-grid{ grid-template-columns: 1fr !important; }
}

/* ===== MODAL ===== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
    overflow-y: auto;
}

.modal-overlay.active {
    display: flex;
}

.modal-container {
    background: var(--surface);
    border-radius: 24px;
    max-width: 1100px;
    width: 100%;
    max-height: 92vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    position: relative;
    margin: auto;
}

.modal-header {
    position: sticky;
    top: 0;
    background: linear-gradient(135deg, rgba(var(--active-rgb), 0.1), rgba(var(--active-rgb), 0.05));
    padding: 16px 32px;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 24px 24px 0 0;
    z-index: 10;
}

.modal-header-left {
    display: flex;
    align-items: center;
    gap: 16px;
}

.modal-title {
    font-size: 22px;
    font-weight: 800;
    color: var(--active);
    margin: 0;
}

.modal-header-info {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 12px;
    color: var(--text-muted);
    padding-left: 16px;
    border-left: 2px solid var(--border);
}

.header-info-item {
    display: flex;
    align-items: center;
    gap: 6px;
}

.header-info-item i {
    font-size: 12px;
    color: var(--active);
}

.header-info-divider {
    color: var(--border);
}

.register-selector-wrapper {
    position: relative;
    display: inline-flex;
    align-items: center;
}

.register-selector-icon {
    position: absolute;
    left: 14px;
    font-size: 18px;
    color: var(--active);
    pointer-events: none;
    z-index: 1;
    transition: color 0.3s;
}

.header-info-select {
    border: none;
    background: linear-gradient(135deg, rgba(var(--active-rgb), 0.15), rgba(var(--active-rgb), 0.08));
    font-weight: 800;
    color: var(--active);
    cursor: pointer;
    font-family: inherit;
    font-size: 16px;
    padding: 10px 20px 10px 44px;
    border-radius: 12px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(var(--active-rgb), 0.15);
    position: relative;
    min-width: 180px;
}

.header-info-select:hover {
    background: linear-gradient(135deg, rgba(var(--active-rgb), 0.25), rgba(var(--active-rgb), 0.15));
    box-shadow: 0 4px 16px rgba(var(--active-rgb), 0.25);
    transform: translateY(-1px);
}

.header-info-select:focus {
    outline: none;
    box-shadow: 0 0 0 4px rgba(var(--active-rgb), 0.2), 0 4px 16px rgba(var(--active-rgb), 0.3);
    transform: translateY(-1px);
}

.header-info-select option {
    padding: 10px;
    font-size: 16px;
}

.modal-close {
    width: 40px;
    height: 40px;
    border: none;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    color: var(--text-muted);
    font-size: 18px;
}

.modal-close:hover {
    background: rgba(0, 0, 0, 0.1);
    color: var(--text);
    transform: rotate(90deg);
}

.modal-body {
    padding: 20px 32px 24px 32px;
}

.expanded-fields {
    display: none;
    margin-top: 12px;
    padding: 16px;
    background: var(--bg);
    border-radius: 12px;
    border: 1px solid var(--border);
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: all 0.3s ease;
}

.expanded-fields.show {
    display: block;
    max-height: 500px;
    opacity: 1;
}

.modal-info-bar {
    display: flex;
    gap: 24px;
    padding: 16px 20px;
    background: var(--bg);
    border-radius: 12px;
    margin-bottom: 24px;
    flex-wrap: wrap;
}

.modal-info-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
}

.modal-info-label {
    color: var(--text-muted);
    font-weight: 500;
}

.modal-info-value {
    color: var(--text);
    font-weight: 700;
}

.modal-info-select {
    border: none;
    background: transparent;
    font-weight: 700;
    color: var(--active);
    cursor: pointer;
    font-family: inherit;
    font-size: 14px;
}

.modal-info-select:focus {
    outline: 2px solid var(--active);
    outline-offset: 2px;
    border-radius: 4px;
}

@media (max-width: 640px) {
    .modal-container {
        max-height: 95vh;
        border-radius: 16px;
    }
    
    .modal-header {
        padding: 20px 24px;
        border-radius: 16px 16px 0 0;
    }
    
    .modal-title {
        font-size: 20px;
    }
    
    .modal-body {
        padding: 16px;
    }
}

/* ===== FORM STYLES FOR MODAL ===== */
.form-row {
    display: grid;
    grid-template-columns: 1fr 260px;
    gap: 16px;
    margin-bottom: 12px;
}

.form-group {
    margin-bottom: 12px;
}

.form-row-line-item {
    display: grid;
    grid-template-columns: 1fr 200px;
    gap: 12px;
    margin-bottom: 12px;
}

.form-row-line-item .form-group {
    margin-bottom: 0;
}

.optional-buttons-row {
    display: flex;
    gap: 10px;
    margin-bottom: 12px;
    flex-wrap: wrap;
}

.optional-buttons-row .add-section-btn {
    flex: 1;
    min-width: 200px;
}

.form-group-flex {
    flex: 1;
}

.form-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 8px;
}

.form-label .required {
    color: var(--error);
}

.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: 10px;
    font-size: 15px;
    font-family: inherit;
    transition: all 0.2s;
    background: var(--surface);
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(5, 150, 105, 0.1);
}

.form-textarea {
    resize: vertical;
    min-height: 80px;
}

.form-hint {
    font-size: 13px;
    color: var(--text-muted);
    margin-top: 6px;
}

.input-with-button {
    display: flex;
    gap: 8px;
    align-items: flex-start;
}

.input-with-button .form-input {
    flex: 1;
}

.input-with-prefix {
    position: relative;
    display: flex;
    align-items: center;
}

.input-prefix {
    position: absolute;
    left: 16px;
    font-size: 15px;
    font-weight: 600;
    color: var(--text-muted);
    pointer-events: none;
    z-index: 1;
}

.input-with-prefix .form-input {
    padding-left: 32px;
}

.add-detail-btn {
    width: 40px;
    height: 40px;
    border: 2px solid var(--border);
    background: var(--surface);
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    color: var(--text-muted);
    flex-shrink: 0;
}

.add-detail-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.05);
}

.add-detail-btn.active {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.1);
}

.remove-item-btn {
    width: 36px;
    height: 36px;
    border: none;
    background: transparent;
    color: var(--text-muted);
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.remove-item-btn:hover {
    background: rgba(239, 68, 68, 0.1);
    color: var(--error);
}

.add-line-item-btn {
    padding: 9px 14px;
    border: 2px dashed var(--border);
    background: transparent;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: center;
    width: 100%;
    font-family: inherit;
}

.add-line-item-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.05);
}

.add-line-item-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.add-section-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    border: 2px dashed var(--border);
    background: transparent;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.2s;
    width: 100%;
    font-family: inherit;
    margin-bottom: 0;
}

.add-section-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.05);
}

.add-section-btn.active {
    border-style: solid;
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.08);
}

.form-actions {
    display: flex;
    gap: 10px;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid var(--border);
}

.btn-blue {
    background: #64748b;
    color: white;
}

.btn-blue:hover {
    background: #475569;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(100, 116, 139, 0.3);
}

.btn-tertiary {
    background: white;
    color: var(--text);
    border: 2px solid var(--border);
}

.btn-tertiary:hover {
    border-color: var(--text);
    background: var(--bg);
    transform: translateY(-1px);
}

.btn-tertiary i {
    color: #ef4444;
}

.direction-toggle-compact {
    display: flex;
    gap: 8px;
}

.direction-toggle-compact input[type="radio"] {
    display: none;
}

.direction-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 16px;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid transparent;
}

.direction-btn-in {
    background: linear-gradient(135deg, rgba(16,185,129,0.12), rgba(16,185,129,0.06));
    color: #059669;
    border-color: rgba(16,185,129,0.15);
}

.direction-btn-in:hover {
    background: linear-gradient(135deg, rgba(16,185,129,0.18), rgba(16,185,129,0.10));
    border-color: rgba(16,185,129,0.25);
}

#modalDirectionIn:checked + .direction-btn-in {
    background: linear-gradient(135deg, #059669, #047857);
    color: white;
    border-color: #047857;
    box-shadow: 0 0 0 3px rgba(16,185,129,0.2);
    font-weight: 700;
}

.direction-btn-out {
    background: linear-gradient(135deg, rgba(245,158,11,0.12), rgba(245,158,11,0.06));
    color: #f59e0b;
    border-color: rgba(245,158,11,0.15);
}

.direction-btn-out:hover {
    background: linear-gradient(135deg, rgba(245,158,11,0.18), rgba(245,158,11,0.10));
    border-color: rgba(245,158,11,0.25);
}

#modalDirectionOut:checked + .direction-btn-out {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    border-color: #d97706;
    box-shadow: 0 0 0 3px rgba(245,158,11,0.2);
    font-weight: 700;
}

@media (max-width: 640px) {
    .direction-toggle {
        grid-template-columns: 1fr;
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .line-item {
        grid-template-columns: 1fr;
    }
    
    .line-item-amount {
        width: 100%;
    }
}

.line-items-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 12px;
}

.line-item {
    display: grid;
    grid-template-columns: 1fr 200px 40px;
    gap: 10px;
    align-items: center;
}

.line-item-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: 10px;
    font-size: 15px;
    font-family: inherit;
    transition: all 0.2s;
    background: var(--surface);
}

.line-item-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(5, 150, 105, 0.1);
}

.line-item-amount {
    text-align: right;
}

.autocomplete-wrapper {
    position: relative;
    flex: 1;
}

.autocomplete-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--surface);
    border: 2px solid var(--primary);
    border-top: none;
    border-radius: 0 0 10px 10px;
    max-height: 280px;
    overflow-y: auto;
    z-index: 1000;
    display: none;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.autocomplete-dropdown.show {
    display: block;
}

.autocomplete-item {
    padding: 12px 16px;
    cursor: pointer;
    transition: background 0.2s;
    border-bottom: 1px solid var(--border);
}

.autocomplete-item:last-child {
    border-bottom: none;
}

.autocomplete-item:hover {
    background: var(--bg);
}

.autocomplete-item.active {
    background: rgba(var(--active-rgb), 0.1);
}

.autocomplete-item-name {
    font-weight: 700;
    color: var(--text);
    margin-bottom: 4px;
}

.autocomplete-item-details {
    font-size: 13px;
    color: var(--text-muted);
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

.autocomplete-item-detail {
    display: flex;
    align-items: center;
    gap: 4px;
}

.autocomplete-item-detail i {
    font-size: 11px;
}

.autocomplete-add-new {
    padding: 12px 16px;
    cursor: pointer;
    background: linear-gradient(135deg, rgba(var(--active-rgb), 0.08), rgba(var(--active-rgb), 0.04));
    color: var(--primary);
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 8px;
    border-top: 2px solid var(--border);
    transition: all 0.2s;
}

.autocomplete-add-new:hover {
    background: linear-gradient(135deg, rgba(var(--active-rgb), 0.15), rgba(var(--active-rgb), 0.08));
}

.autocomplete-add-new i {
    font-size: 14px;
}

.autocomplete-empty {
    padding: 20px 16px;
    text-align: center;
    color: var(--text-muted);
    font-style: italic;
}

    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" /></head>
<body>
<nav class="site-nav">
  <div class="nav-container">
            <a href="dashboard.html" class="logo">
                <svg width="36" height="36" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 6 C10 4.89543 10.8954 4 12 4 L36 4 C37.1046 4 38 4.89543 38 6 L38 38 L36 40 L34 38 L32 40 L30 38 L28 40 L26 38 L24 40 L22 38 L20 40 L18 38 L16 40 L14 38 L12 40 L10 38 Z" fill="url(#nav-logo-gradient)"/>
                    <path d="M32 4 L38 10 L32 10 Z" fill="#000000" opacity="0.25"/>
                    <path d="M32 4 L32 10 L38 10" stroke="#047857" stroke-width="1.5" stroke-linejoin="round"/>
                    <line x1="14" y1="14" x2="30" y2="14" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                    <line x1="14" y1="19" x2="26" y2="19" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.8"/>
                    <line x1="14" y1="24" x2="30" y2="24" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                    <line x1="14" y1="29" x2="22" y2="29" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.7"/>
                    <path d="M10 36 L12 38 L14 36 L16 38 L18 36 L20 38 L22 36 L24 38 L26 36 L28 38 L30 36 L32 38 L34 36 L36 38 L38 36" stroke="#047857" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <defs>
                        <linearGradient id="nav-logo-gradient" x1="24" y1="4" x2="24" y2="40" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#059669"/>
                            <stop offset="100%" stop-color="#10b981"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span>SpendNote</span>
            </a>
            <ul class="nav-links">
                <li><a href="dashboard.html" class="nav-cash-item">Dashboard</a></li>
                <li><a href="spendnote-cash-box-list.html" class="nav-cash-item" id="navCashBoxes">Cash Boxes</a></li>
                <li><a href="spendnote-transaction-history.html" class="nav-cash-item" id="navTransactions">Transactions</a></li>
                <li><a href="spendnote-contact-list.html">Contacts</a></li>
                <li><button class="nav-new-transaction-btn" id="addTransactionBtn"><i class="fas fa-plus"></i> New Transaction</button></li>
                <li class="user-avatar-wrapper" id="userAvatarBtn">
                    <div class="user-avatar">
                        <img src="https://i.pravatar.cc/150?img=12" alt="User">
                    </div>
                    <span class="user-name">John</span>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-dropdown-menu">
                            <a href="spendnote-user-settings.html" class="user-dropdown-item">
                                <i class="fas fa-cog"></i>
                                Settings
                            </a>
                            <div class="user-dropdown-divider"></div>
                            <a href="index.html" class="user-dropdown-item">
                                <i class="fas fa-sign-out-alt"></i>
                                Log out
                            </a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

<div class="app-container">
    <main class="main-content">
        <!-- HEADER -->
        <div class="page-header">
            <div class="header-top">
                <div class="header-left">
                    <h1>Transaction TRX-342</h1>
                    <div class="tx-meta">
                        <span><i class="fas fa-calendar"></i> Jan 6, 2026</span>
                        <span><i class="fas fa-user"></i> Logged by Jane Doe</span>
                        <span class="status-badge in">⬇ IN</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="window.print()">
                        <i class="fas fa-print"></i>
                        Print
                    </button>
                    <button class="btn btn-secondary" onclick="alert('Download PDF\n\nIn production:\n- Generate PDF from receipt\n- Download file')">
                        <i class="fas fa-file-pdf"></i>
                        Download PDF
                    </button>
                    <button class="btn btn-primary" onclick="alert('Email Receipt\n\nIn production:\n- Open email dialog\n- Enter recipient email\n- Send receipt as PDF attachment')">
                        <i class="fas fa-envelope"></i>
                        Email Receipt
                    </button>
                    <button class="btn btn-danger" onclick="if(confirm('Delete Transaction?\n\n⚠️ Admin access required\n\nThis action cannot be undone.\n\nDeleting this transaction will affect the Cash Box balance.\n\nAre you sure you want to delete this transaction?')) { alert('Transaction deleted (Demo mode)\n\nIn production:\n- Check admin role\n- Update Cash Box balance\n- Archive transaction\n- Redirect to dashboard'); }">
                        <i class="fas fa-trash"></i>
                        Delete
                    </button>
                </div>
            </div>
        </div>

        <!-- CONTENT -->
        <div class="content-grid">
            <!-- TRANSACTION SUMMARY -->
            <div class="transaction-summary">
                <!-- LEFT: Main Info -->
                <div class="transaction-main-info">
                    <!-- Cash Box Header -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 24px; padding-bottom: 20px; border-bottom: 2px solid rgba(5, 150, 105, 0.2);">
                        <div style="width: 48px; height: 48px; background: rgba(5, 150, 105, 0.15); border-radius: 12px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                            <i class="fas fa-building" style="font-size: 24px; color: #059669;"></i>
                        </div>
                        <div>
                            <div style="font-size: 20px; font-weight: 800; color: #059669; margin-bottom: 2px;">Main Office</div>
                            <div style="font-size: 13px; color: var(--text-muted); font-weight: 600;">CR-001</div>
                        </div>
                    </div>
                    
                    <div class="transaction-info-grid">
                        <div class="info-row">
                            <span class="info-label">Transaction ID</span>
                            <span class="info-value"><code>TRX-342</code></span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Date</span>
                            <span class="info-value">January 6, 2026</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Contact Name</span>
                            <span class="info-value">John Smith</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Additional Info</span>
                            <span class="info-value">CLIENT-4523</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Reference ID</span>
                            <span class="info-value">PO-2026-0142</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Created By</span>
                            <span class="info-value">Jane Doe on Jan 6, 2026 - 2:45 PM</span>
                        </div>
                    </div>
                </div>

                <!-- RIGHT: Details -->
                <div class="transaction-details-info">
                    <!-- AMOUNT CARD -->
                    <div class="amount-card-standalone in">
                        <div class="amount-direction in">
                            <i class="fas fa-arrow-down"></i>
                            Cash IN (Received)
                        </div>
                        <div class="amount-value in" style="font-size: 42px; margin: 0;">$7,200.00</div>
                    </div>

                    <h2 class="card-title" style="margin-bottom: 20px;">Line Items</h2>
                    <div class="line-items-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Consulting Services - Q4 2025</td>
                                    <td>$5,000.00</td>
                                </tr>
                                <tr>
                                    <td>Project Management Fee</td>
                                    <td>$1,800.00</td>
                                </tr>
                                <tr>
                                    <td>Additional Support Hours</td>
                                    <td>$400.00</td>
                                </tr>
                                <tr class="table-total">
                                    <td><strong>Total</strong></td>
                                    <td><strong>$7,200.00</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- NOTE -->
                    <div style="margin-top: 24px;">
                        <span class="info-label">Note</span>
                        <div class="note-box" style="margin-top: 8px;">
                            Payment received for Q4 consulting services. Client was very satisfied with the project outcomes and has indicated interest in continuing work in Q1 2026.
                        </div>
                    </div>
                </div>
            </div>

            <!-- RECEIPT SETTINGS & PREVIEW -->
            <div class="receipts-layout">
                <!-- LEFT: Receipt Settings -->
                <div class="receipts-settings">
                    <!-- FORMAT SELECTOR -->
                    <div class="form-group">
                        <label class="form-label">Receipt format</label>
                        <p class="form-hint" style="margin-bottom: 12px;">Select which format to preview</p>
                        <div class="format-cards">
                            <div class="format-card active" data-format="a4">
                                <div class="format-icon">
                                    <i class="fas fa-copy"></i>
                                </div>
                                <div class="format-info">
                                    <div class="format-name">Print (2 copies)</div>
                                    <div class="format-desc">One for you, one for recipient</div>
                                </div>
                            </div>
                            <div class="format-card" data-format="pdf">
                                <div class="format-icon">
                                    <i class="fas fa-file-pdf"></i>
                                </div>
                                <div class="format-info">
                                    <div class="format-name">PDF Receipt</div>
                                    <div class="format-desc">Download as PDF file</div>
                                </div>
                            </div>
                            <div class="format-card" data-format="email">
                                <div class="format-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="format-info">
                                    <div class="format-name">Email Receipt</div>
                                    <div class="format-desc">Send to recipient</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FIELDS TO SHOW -->
                    <div class="form-group">
                        <label class="form-label">Fields to show</label>
                        <p class="form-hint" style="margin-bottom: 8px;">Amount, Date, and Payer/Receiver names are always shown</p>
                        <p class="form-hint" style="margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-info-circle" style="color: var(--primary);"></i>
                            Default settings loaded from <strong>Main Office (CR-001)</strong>
                            <a href="#" onclick="alert('Reset to defaults\n\nIn production:\n- Load default settings from Cash Box\n- Apply to current receipt'); return false;" style="color: var(--primary); text-decoration: none; font-weight: 600; margin-left: 4px;">Reset to defaults</a>
                        </p>
                        
                        <div class="receipt-toggles">
                            <div class="receipt-toggle-item">
                                <span class="toggle-label">Show Logo</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked data-field="logo">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="receipt-toggle-item">
                                <span class="toggle-label">Show Addresses</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked data-field="addresses">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="receipt-toggle-item">
                                <span class="toggle-label">Show Tracking Details</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked data-field="tracking">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="receipt-toggle-item">
                                <span class="toggle-label">Show Additional Info</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked data-field="additional">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="receipt-toggle-item">
                                <span class="toggle-label">Show Note</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked data-field="note">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="receipt-toggle-item">
                                <span class="toggle-label">Show Signatures</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked data-field="signatures">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- CUSTOMIZE RECEIPT TEXT (PRO) -->
                    <div class="form-group">
                        <label class="form-label">
                            Customize Receipt Text
                            <span class="upgrade-badge">
                                <i class="fas fa-crown"></i> Pro
                            </span>
                        </label>
                        <p class="form-hint" style="margin-bottom: 16px;">Customize the text labels and messages on your receipts</p>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
                            <div>
                                <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Receipt title</label>
                                <input type="text" class="form-input" placeholder="Cash Receipt" style="font-size: 13px; padding: 8px 12px;">
                            </div>
                            <div>
                                <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Total label</label>
                                <input type="text" class="form-input" placeholder="Total handed over" style="font-size: 13px; padding: 8px 12px;">
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
                            <div>
                                <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">From label</label>
                                <input type="text" class="form-input" placeholder="FROM" style="font-size: 13px; padding: 8px 12px;">
                            </div>
                            <div>
                                <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">To label</label>
                                <input type="text" class="form-input" placeholder="TO" style="font-size: 13px; padding: 8px 12px;">
                            </div>
                        </div>
                        
                        <div>
                            <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Footer note</label>
                            <textarea class="form-input" placeholder="e.g., Thank you for your business!" rows="2" style="font-size: 13px; padding: 8px 12px;"></textarea>
                        </div>
                    </div>
                </div>

                <!-- RIGHT: Receipt Preview -->
                <div class="receipt-preview-panel">
                    <div class="preview-header">
                        <div class="preview-title">
                            <i class="fas fa-eye"></i>
                            Live Preview
                        </div>
                        <div class="zoom-controls">
                            <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span class="zoom-level" id="zoomLevel">70%</span>
                            <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="zoom-btn" onclick="resetZoom()" title="Reset Zoom">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>
                    <div class="receipt-preview-container">
                        <div class="receipt-preview-wrapper" id="receiptWrapper">
                            <iframe id="receiptFrame" class="receipt-preview-frame" src="spendnote-receipt-a4-two-copies.html"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </main>
    </div>

    <!-- Modern 2-Row Footer -->
<footer class="app-footer">
    <div class="app-footer-container">
        <!-- Top Row -->
        <div class="app-footer-top">
            <!-- Brand Section with Disclaimer -->
            <div class="app-footer-brand">
                <a href="dashboard.html" class="app-footer-brand-logo">
                    <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Main body with subtle gray pattern -->
                        <path d="M10 6 C10 4.89543 10.8954 4 12 4 L36 4 C37.1046 4 38 4.89543 38 6 L38 38 L36 40 L34 38 L32 40 L30 38 L28 40 L26 38 L24 40 L22 38 L20 40 L18 38 L16 40 L14 38 L12 40 L10 38 Z" fill="white"/>
                        <!-- Folded corner - darker gray -->
                        <path d="M32 4 L38 10 L32 10 Z" fill="rgba(0,0,0,0.15)"/>
                        <!-- Folded corner outline -->
                        <path d="M32 4 L32 10 L38 10" stroke="rgba(0,0,0,0.2)" stroke-width="1.5" stroke-linejoin="round"/>
                        <!-- Receipt lines - light gray -->
                        <line x1="14" y1="14" x2="30" y2="14" stroke="rgba(0,0,0,0.15)" stroke-width="2.5" stroke-linecap="round"/>
                        <line x1="14" y1="19" x2="26" y2="19" stroke="rgba(0,0,0,0.12)" stroke-width="2.5" stroke-linecap="round"/>
                        <line x1="14" y1="24" x2="30" y2="24" stroke="rgba(0,0,0,0.15)" stroke-width="2.5" stroke-linecap="round"/>
                        <line x1="14" y1="29" x2="22" y2="29" stroke="rgba(0,0,0,0.1)" stroke-width="2.5" stroke-linecap="round"/>
                        <!-- Bottom zigzag - gray -->
                        <path d="M10 36 L12 38 L14 36 L16 38 L18 36 L20 38 L22 36 L24 38 L26 36 L28 38 L30 36 L32 38 L34 36 L36 38 L38 36" stroke="rgba(0,0,0,0.2)" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>SpendNote</span>
                </a>
                <p class="app-footer-brand-desc">
                    Cash receipt management for modern teams. Simple, secure, transparent.
                </p>
            </div>
            
            <!-- Right: Links + Disclaimer -->
            <div class="app-footer-right">
                <div class="app-footer-links-simple">
                    <a href="index.html#features">Features</a>
                    <a href="spendnote-pricing.html">Pricing</a>
                    <a href="spendnote-faq.html">FAQ</a>
                    <a href="spendnote-terms.html">Legal</a>
                </div>
                
                <!-- Disclaimer on right side -->
                <div class="app-footer-brand-disclaimer">
                    <i class="fas fa-info-circle"></i>
                    <span>Cash handoff documentation only. Not a tax or accounting tool.</span>
                </div>
            </div>
        </div>
        
        <!-- Bottom Row -->
        <div class="app-footer-bottom">
            <div class="app-footer-copyright">
                2026 SpendNote. All rights reserved.
            </div>
        </div>
    </div>
</footer>







    <script>
        // Track current display options
        let displayOptions = {
            logo: '1',
            addresses: '1',
            tracking: '1',
            additional: '1',
            note: '1',
            signatures: '1'
        };

        // Track current format
        let currentFormat = 'a4';

        // Build URL with parameters
        function buildReceiptUrl(format) {
            const baseUrls = {
                'a4': 'spendnote-receipt-a4-two-copies.html',
                'pdf': 'spendnote-pdf-receipt.html',
                'email': 'spendnote-email-receipt.html'
            };
            
            const params = new URLSearchParams();
            for (const [key, value] of Object.entries(displayOptions)) {
                params.append(key, value);
            }
            
            return `${baseUrls[format]}?${params.toString()}`;
        }

        // Reload iframe with current settings
        function reloadIframe() {
            const iframe = document.getElementById('receiptFrame');
            if (iframe) {
                iframe.src = buildReceiptUrl(currentFormat);
            }
        }

        // Format card selection
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.format-card').forEach(card => {
                card.addEventListener('click', function() {
                    // Remove active class from all cards
                    document.querySelectorAll('.format-card').forEach(c => {
                        c.classList.remove('active');
                    });
                    
                    // Add active class to clicked card
                    this.classList.add('active');
                    
                    // Update current format and reload preview
                    currentFormat = this.dataset.format;
                    reloadIframe();
                });
            });

            // Toggle switches for receipt fields
            document.querySelectorAll('.receipt-toggles input[type="checkbox"]').forEach(toggle => {
                toggle.addEventListener('change', function() {
                    const field = this.dataset.field;
                    if (field) {
                        // Update display options
                        displayOptions[field] = this.checked ? '1' : '0';
                        // Reload iframe with new settings
                        reloadIframe();
                    }
                });
            });

            // Initialize iframe
            reloadIframe();
            updateZoom();
        });

        // Zoom functionality
        let currentZoom = 0.7;
        const zoomStep = 0.05;
        const minZoom = 0.5;
        const maxZoom = 1.2;

        function updateZoom() {
            const iframe = document.getElementById('receiptFrame');
            const zoomLevel = document.getElementById('zoomLevel');
            if (iframe && zoomLevel) {
                iframe.style.zoom = currentZoom;
                zoomLevel.textContent = Math.round(currentZoom * 100) + '%';
            }
        }

        function zoomIn() {
            if (currentZoom < maxZoom) {
                currentZoom = Math.min(currentZoom + zoomStep, maxZoom);
                updateZoom();
            }
        }

        function zoomOut() {
            if (currentZoom > minZoom) {
                currentZoom = Math.max(currentZoom - zoomStep, minZoom);
                updateZoom();
            }
        }

        function resetZoom() {
            currentZoom = 0.7;
            updateZoom();
        }
    </script>
    <script src="assets/js/main.js"></script>
</body>
</html>
